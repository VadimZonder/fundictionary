<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    
    <!--the line below is taken from a template-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    
    <%= favicon_link_tag 'favicon-196.png' %>
    <title>SchoolApp Home</title>

    <!--the line below is taken from a template-->
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <!--the line below is taken from a template-->
    <meta name="viewport" content="width=device-width" />
    
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    <%= csrf_meta_tags %>


    <!-- Bootstrap core CSS the --> <!--the line below is taken from a template
    <link href="assets/stylesheets/bootstrap.min.css" rel="stylesheet">-->
    <% stylesheet_link_tag "bootstrap.min"%>
    <!-- Animation library for notifications   --><!--the line below is taken from a template
    <link href="assets/stylesheets/animate.min.css" rel="stylesheet">-->
    <% stylesheet_link_tag "animate.min"%>
    <!--  Light Bootstrap Table core CSS    --><!--the line below is taken from a template
    <link href="assets/stylesheets/light-bootstrap-dashboard.css?v=1.4.0" rel="stylesheet">-->
    <% stylesheet_link_tag "light-bootstrap-dashboard"%>


    <!--     Fonts and icons     --><!--the line below is taken from a template-->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <!--the line below is taken from a template-->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700,300" rel="stylesheet" type="text/css">
    <!--the line below is taken from a template
    <link href="assets/stylesheets/pe-icon-7-stroke.css" rel="stylesheet">-->
   <% stylesheet_link_tag "pe-icon-7-stroke"%>
    
    
    <link href="https://ajax.googleapis.com/ajax/libs/jquery/3.0.1/jquery.min.js">
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->



</head>

<body>
<div class="content purple-horizontal">
    <div class="col-md-12">
       
        <div class="header">
            <div class="container-fluid">
                
                <h2>You searched for "<%#= @search_term2 %>" </h2>
                


 <%= render 'layouts/header' %>


 <!--the line below is taken from a template and I added a class-->
 <div class="content purple-horizontal" >
    <!--the line below is taken from a template-->
    <div class="container-fluid "  >
        <!--the line below is taken from a template-->
        <div class="row">
           <!--PARENT WINDOW -->
           <!--the line below is taken from a template + I changed the size-->
           <div class="col-md-12 hover" >
             <!--the line below is taken from a template and I added a class--> 
             <div class="card  purple-button ">
 <%= render 'layouts/search' %>
                 
                <%#= link_to({:controller => 'parents', :action => 'index'}) do %>
                <div class="header ">
                      <%
                            require "nokogiri" 
                          require "rest-client"
                          
                        # @urlBasic = "http://www.yourdictionary.com/"
                          
                         urlFull="https://www.iplocation.net/"

                          html=RestClient.get(urlFull)
                          
                          @urlSplit = urlFull.split('/')
                           
                           
                           
                            agent = Mechanize.new
                           page = agent.get('https://free-proxy-list.net/anonymous-proxy.html')
                         # @table = page.at('table')

                          #page.at('table').search('tr').each do |row|
                             #cells = row.search('th td').map { |cell| cell.text.strip }
                             # @table2 =  @table2 + cells
                         # end
                         @agentAlias = [
                     "Linux Firefox", "Linux Konqueror","Linux Mozilla", 
                     "Mac Firefox","Mac Mozilla","Mac Safari", 
                     "Mac Safari 4", "Windows IE 6","Windows IE 7", "Windows IE 8",
                     "Windows IE 9","Windows IE 10","Windows IE 11", 
                     "Windows Edge", "Windows Mozilla","Windows Firefox", 
                     "iPhone","iPad", "Android"
                      ]
                      #!!!!!!!!!!!first check if it works with random aliases then attach one to an ip address to archive
                      
                     @agentAliasRandom = @agentAlias.shuffle.first
                           %>
                    
                            <div class="content table-responsive table-full-width">
                  <table class="table table-hover table-striped">
                    <thead>
                        <tr>
                            <!--changing css left right center + deleteing some fields-->
                            <th class="text-left">Text</th>
                             

                            
                        </tr>
                    </thead>
                   
                  <tbody>
                       <%#= randomNumber = rand(1, 9, 17).to_i%>
                       <%#= creatin a list of numbers at which index ip is licated and pick them randomly by samplei%>
                       <%randomNumber = [1, 9, 17, 25, 33, 41, 49, 57, 65, 73, 81, 89, 97, 105, 113, 121, 129, 137, 145, 153].sample%>
                        <%# split the table with all the info into 8 colums%>
                        <% page.at('table').search('td').each_slice(8)  do |row1, row2, row3, row4, row5, row6 , row7 , row8  | %>
                        <%# if randomly picked index is == torow with a list of IP idexes %>
                       <% if page.at('table').search('td').index(row1) + 1 == randomNumber %>
                        <% @randomIP = row1.text.strip%>
                        <% @randomPort = row2.text.strip%>
                         
                        <% end %>
                        
                         <% # save rows 1 and 2 into a array object%>
                        <% @devideRow = [row1.text.strip, row2.text.strip]%>
                        <% @devideRow1 = [row1.text.strip]%>
                        <%# once used create archi t obe reused once in a while-archive of 1021%>
                      
                        
                        
                        <%# randomly select each even number(IP) and +1 index will be its port   + @devideRow.index[@randomIPIndex]%>
                        
                         <%#= @randomIPIndex = @devideRow.index(@randomIP).to_s%>
                         <% end %>
                          
                         <td class="text-center"><%= "IP " + @randomIP.to_s + " PORT " + @randomPort  + " Browser " + @agentAliasRandom%></td>
                         <%# need to save it to DB since all will clear on refresh IP-string, Port-string and lastInserted-integer%>
                         <%  
                         object = Archive.new(:ip => @randomIP, :port => @randomPort, :browser => @agentAliasRandom)
                        object.save

                         %>
                         
                          
                         <%#randomise data in DB and pick first______________________________________%>
                          <% @fromArchiveRandom = @archive.shuffle.first%>
                          <% @fromArchiveRandomIP = @fromArchiveRandom.ip%>
                          <% @fromArchiveRandomPort = @fromArchiveRandom.port%>
                          <% @fromArchiveRandomBrowser = @fromArchiveRandom.browser%>
                               <tr>
                                     <td class="text-center">From Archive: </td>
                            <td class="text-center"><%= @fromArchiveRandomIP%></td>
                              <td class="text-center"><%= @fromArchiveRandomPort%></td>
                               <td class="text-center"><%=@fromArchiveRandomBrowser%></td>
                        </tr></td>
                         <%#randomise data in DB and pick first______________________________________%>
                         
                         
                        <%
                         
                         
                         
                         
                         # now send a request to fundictionary with diff ips ______________________________________
agent2 = Mechanize.new
#create an array of working ip addresses and a corresponding port that can be called by indexses (or automaticall get from 'https://free-proxy-list.net/anonymous-proxy.html' and others)
agent2.set_proxy @fromArchiveRandomIP, @fromArchiveRandomPort
#IMPORTAN get all the possible info collected about 1.the client. 2. changeIP, 3.Change cookies. 4.Time and frequency randomised. 5. Browser and etc  P.S. delete this line
#create an array of browsers
agent.user_agent_alias = @fromArchiveRandomBrowser

###change to the desired site

page2 = agent2.get('https://toptenjokes.herokuapp.com/')
###page3 = agent3.get('https://www.iplocation.net/')
#random function 10.2 minutes
@title = page2.title
##@ip_address = request.remote_ip

#@another_ip=request.headers['HTTP_X_FORWARDED_FOR']
##@p = page2.at('p').text.strip
#@body = page.at('body').text.strip
#####@table =page2.at('table').text.strip 
#puts "the tile of the page is: "#+title

# now send a request to fundictionary with diff ips ______________________________________
%>
<h4 class="title">the tietle of the page is  "<%=@title  %>" and your IP is "<%@fromArchiveRandomIP  %>" ,PORT "<%= @fromArchiveRandomPort%>" and Browser "<%= @fromArchiveRandomBrowser%>"</h4>
<br>
<h4 class="title">Calling with this info: <%###=@table  %></h4>


<%#begin no make a RAND PERIODIC CALLS 10.2 minutes ______________________________________%>

  <INPUT TYPE="button" id="myButtonId" VALUE="Reload Page" onClick="history.go(0)">
      <script>
      var randomSeconds = Math.floor(Math.random() * 1000011);  
          setInterval(function () {document.getElementById("myButtonId").click();}, randomSeconds);
      </script>
   
<%#end RAND PERIODIC CALLS ______________________________________%>

                         
                         
                          <%#@archive.shuffle.each do |entry|%>
                               <tr>
                            <td class="text-center"><%#= entry.ip%></td>
                              <td class="text-center"><%#= entry.port%></td>
                        </tr>
                          <%#end %>
                          <%#see all the data in DB______________________________________%>
                         
                         <%# print each remaining row%>
                        <%# @devideRow1.each  do |row| %>
                     
                        <%# end %>
  
                    
                    </tbody>
                </table>
            </div>
            
            
                  
                    <h4 class="title">Title  "<%=@urlSplit[-1]  %>"</h4>
                    <br>
                                      
                    
                    
                    <p class="category">See your student's results "<%#=@search_term %>" </p>
                </div>
                
                
                <div class="content">
                    <!--content space-->
                    <br><br><br>
                   <%= 
                         
                           doc=Nokogiri::HTML.parse(html)
                          
                          
                          
                          articles=doc.css('.sense')#.text#.html_safe#
                         
                         #defn = articles.at_css "ol"
                         defnToHtml = articles.to_html
                        defnToHtml.html_safe
                          
                          %>
                    
                    
                    
                    
                    
                  <%# !!!!! ADD A SEARCH BAR THAT ON SUBMIT WILL ADD SEARCHED TERM TO THE END OF THE URL AND SEARCH%>  
                     <%#working code
                            require "nokogiri" 
                          require "rest-client"
                          
                         @urlBasic = "http://www.yourdictionary.com/"
                          
                         urlFull="http://www.yourdictionary.com/contrast"

                          html=RestClient.get(urlFull)
                          
                          @urlSplit = urlFull.split('/')
                           
                          
                           %>
                  
                    <h4 class="title">Definition of "<%=@urlSplit[-1]  %>"</h4>
                    <p class="category">See your student's results "<%=@search_term %>" </p>
                </div>
                
                
                <div class="content">
                    <!--content space-->
                    <br><br><br>
                   <%= 
                         
                           doc=Nokogiri::HTML.parse(html)
                          
                          
                          
                          articles=doc.css('.sense')#.text#.html_safe#
                         
                         #defn = articles.at_css "ol"
                         defnToHtml = articles.to_html
                        defnToHtml.html_safe
                          
                          %>
                    
                    
                    
                    
                    
                    
                    <br><br>
                    <!-- <div id="chartPreferences" class="ct-chart ct-perfect-fourth"></div>-->
                    <%# link_to image_tag("parents.jpg",class:"image-buttons", id:"parents_image", :size => '168x98') %>

                    <!--the line below is taken from a template-->
                    <div class="footer">
                        <!--the line below is taken from a template-->
                        <div class="legend">
                           <!--the line below is taken from a template-->
                           <i></i> Parent,
                           <i></i> Click
                           <i></i> Here
                       </div>
                       <hr> <!--the line below is taken from a template-->
                       <div class="stats">
                           <!--the line below is taken from a template-->
                           <i class="fa fa-pie-chart"></i> Total Analysis of Marks
                       </div>
                   </div>
               </div>
           </div>
       </div>
       <%# end %>  
       <!--PARENT WINDOW  END-->
       
       <!--TEACHER WINDOW  --> 
       <!-- the same applies to the rest of the code. The elemets that I've already declare that are comming form the template are similar below
       <div class="col-md-6 hover" >
        <div class="card  purple-button ">
           
           <%#= link_to({:controller => 'students', :action => 'index'}) do%>
           <div class="header">
            <h4 class="title">Teacher</h4>
            <p class="category">Mark your student</p>
        </div>
        <div class="content">
            <!--content space-->                 <!--
            <br><br><br><br><br>

       
            <div class="footer">
                <div class="legend">
                    <i></i> Teacher,
                    <i></i> Click
                    <i></i> Here
                </div>
                <hr>
                <div class="stats">
                    <i class="fa fa-key"></i> Request your teacher access code by - email: vadimmalakhovski@hotmail.com - or - call: +353857189054
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<%# end %>  

<!--END TEACHER WINDOW  STATISTICS FIRST BIT OF CONTENT-->                  <!--
<div class="row">
    <div class="col-md-6">
        <div class="card ">
            <div class="header">
                <h4 class="title">How-To Tutorial</h4>
                <p class="category">Would you like to know more about us?</p>
            </div>
            <div class="content">
                <!--<div id="chartActivity" class="ct-chart"></div>-->                 <!--
                <div class="youtube">
                    <iframe width="auto" height="auto" src="https://www.youtube.com/embed/uBfnNGWW-jg">
                    </iframe>
                    
                </div>
                        </div>
                    </div>
                </div>
                <!--END TEACHER WINDOW  STATISTICS FIRST BIT OF CONTENT-->                         <!--
                
                <div class="col-md-6">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">Articles</h4>
                            <p class="category">Education News/Articles</p>
                        </div>
                        <div class="content">
                            <div class="table-full-width">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <td>
                                            </td>
                                            <td><%#= link_to "Storm Emma: Department of Education 'monitoring' situation as Ireland braces for 'exceptional weather event", "https://www.independent.ie/irish-news/storm-emma/storm-emma-department-of-education-monitoring-situation-as-ireland-braces-for-exceptional-weather-event-36648134.html",  :class => "a", :target => "_blank"%></td>
                                        </tr>
                                        
                                        <tr>
                                            <td>
                                            
                                            </td>
                                            <td><%#= link_to "Leaving Certificate Agricultural Science Higher Level: 'Well balanced and manageable","https://www.independent.ie/irish-news/education/exams/leaving-certificate-agricultural-science-higher-level-well-balanced-and-manageable-30368739.html",  :class => "a", :target => "_blank"%></td>
                                            
                                        </tr>
                                        <tr>
                                            <td>
                                               
                                            </td>
                                            <td> 
                                                <%#= link_to "Girls make grade again in Junior Cert results","https://www.irishtimes.com/news/education/girls-earn-better-results-than-boys-in-junior-cert-1.2792898",  :class => "a", :target => "_blank"%></td>
                                            </td>
                                            
                                        </tr>
                                        <tr>
                                            <td>
                                               
                                            </td>
                                            <td>
                                                <%#= link_to "New Junior Cert English results show more pupils with good grades","https://www.independent.ie/irish-news/education/exams/new-junior-cert-english-results-show-more-pupils-with-good-grades-36127190.html",  :class => "a", :target => "_blank"%></td>
                                                
                                            </td>
                                           
                                        </tr>
                                        <tr>
                                            <td>
                                                
                                            </td>
                                            
                                            <td>
                                             <%#= link_to "College place offers being snapped up by students","https://www.independent.ie/irish-news/education/exams/college-place-offers-being-snapped-up-by-students-36056013.html",  :class => "a", :target => "_blank"%></td>
                                         </td>
                                         
                                    </tr>
                                    <tr>
                                        <td>
                                           
                                        </td>
                                        <td>
                                           <%#= link_to "Answers to the most common questions on the CAO system","https://www.independent.ie/irish-news/education/exams/answers-to-the-most-common-questions-on-the-cao-system-36056003.html",  :class => "a", :target => "_blank"%></td>
                                           
                                       </td>
                                       
                                </tr>
                                <tr>
                                        <td>
                                           
                                        </td>
                                        <td>
                                           <%#= link_to "Bullied students tormented about ‘weight or appearance’","https://www.irishtimes.com/news/education/bullied-students-tormented-about-weight-or-appearance-1.3473117",  :class => "a", :target => "_blank"%></td>
                                           
                                       </td>
                                       
                                </tr>
                                  <tr>
                                        <td>
                                           
                                        </td>
                                        <td>
                                           <%#= link_to "Shortages of examiners across all subjects looms weeks before Leaving Cert","https://www.irishtimes.com/news/education/shortages-of-examiners-across-all-subjects-looms-weeks-before-leaving-cert-1.3473025",  :class => "a", :target => "_blank"%></td>
                                           
                                       </td>
                                       
                                </tr>
                            </tbody>
                        </table>
                    </div>                                             

                    <div class="footer">
                        <hr>
                        <div class="stats">
                            <i class="fa "></i> Educate Yourself
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        
            -->
    </div>
    

</div>
</div>







<%= render 'layouts/footer' %>


</div>
</div>
   <!-- 
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->

    
</body>


<!--   Core JS Files   --> <!--the line below is taken from a template
<script src="assets/javascripts/jquery.3.2.1.min.js" type="text/javascript"></script>-->

<%javascript_include_tag "jquery.3.2.1.min.js"%>
<!--the line below is taken from a template
<script src="assets/javascripts/bootstrap.min.js" type="text/javascript"></script>-->
<%javascript_include_tag "bootstrap.min.js"%>
<!--  Charts Plugin --> <!--the line below is taken from a template
<script src="assets/javascripts/chartist.min.js"></script>-->
<%javascript_include_tag "chartist.min.js"%>
<!--  Notifications Plugin    --> <!--the line below is taken from a template
<script src="assets/javascripts/bootstrap-notify.js"></script>-->
<%javascript_include_tag "bootstrap-notify.js"%>

<!-- Light Bootstrap Table Core javascript and methods for Demo purpose --> 
<!--the line below is taken from a template
<script src="assets/javascripts/light-bootstrap-dashboard.js?v=1.4.0"></script>-->
<%javascript_include_tag "light-bootstrap-dashboard.js"%>











